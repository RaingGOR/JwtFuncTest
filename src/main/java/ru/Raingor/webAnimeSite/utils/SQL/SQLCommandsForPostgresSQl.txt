Create table Roles
(
    id   int generated by default AS IDENTITY PRIMARY KEY,
    name varchar(100) not null
);

create table users
(
    id       int generated by default AS IDENTITY PRIMARY KEY,
    username varchar(30) not null,
    password varchar(80) not null,
    email    varchar(50) unique
);

CREATE TABLE users_roles
(
    user_id int REFERENCES users (id),
    role_id int REFERENCES roles (id),
    PRIMARY KEY (user_id, role_id)
);

CREATE TABLE Collection(
    id int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name varchar NOT NULL ,
    author varchar NOT NULL ,
    number_of_season int NOT NULL check ( number_of_season > 0 ),
    description varchar NOT NULL
);

CREATE TABLE Anime(
    id INT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    collection_id INT REFERENCES collection(id) ON DELETE SET NULL,
    name VARCHAR(255) NOT NULL ,
    author VARCHAR(255) NOT NULL ,
    count_series INT NOT NULL check ( count_series > 0 ),
    description TEXT NOT NULL,
    rating REAL
);